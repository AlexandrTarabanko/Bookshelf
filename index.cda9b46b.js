!function(){function e(e,t,o,n){Object.defineProperty(e,t,{get:o,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=o.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},o.parcelRequired7c6=a),a.register("iE7OH",(function(t,o){var n,r;e(t.exports,"register",(function(){return n}),(function(e){return n=e})),e(t.exports,"resolve",(function(){return r}),(function(e){return r=e}));var a={};n=function(e){for(var t=Object.keys(e),o=0;o<t.length;o++)a[t[o]]=e[t[o]]},r=function(e){var t=a[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),a.register("aNJCr",(function(t,o){var n;e(t.exports,"getBundleURL",(function(){return n}),(function(e){return n=e}));var r={};function a(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}n=function(e){var t=r[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return a(e[2])}return"/"}(),r[e]=t),t}})),a("iE7OH").register(JSON.parse('{"EVgbq":"index.cda9b46b.js","2Jedz":"amazon-icon1x.a7ec3af8.png","ehEdb":"amazon-icon2x.20dbc182.png","1zLvb":"applebook-icon1x.a9f158e0.png","bk9Lk":"applebook-icon2x.cdd3fb2c.png","kMOzt":"bookshop-icon1x.eb5fbc1e.png","ku5Dq":"bookshop-icon2x.7a15867f.png","1UC96":"big-placeholder.eaf37d8e.png","1Qsmf":"medium-placeholder.af4bbc1d.png","eWCYn":"small-placeholder.a57fe244.png","6LQ1T":"shop-list.b419d2a6.css","knfz2":"shop-list.9ce54803.js"}'));document.querySelector(".register-modal"),document.querySelector(".login-modal");const i=document.querySelector(".about-book-modal"),s=document.querySelector("#modal-close"),l=(document.querySelector(".fire-base-backdrop"),document.querySelector(".js-backdrop-modal"));function c(){i.classList.add("is-hidden"),l.classList.add("is-hidden")}s.addEventListener("click",c),document.addEventListener("keydown",(function(e){"Escape"===e.key&&c()})),l.addEventListener("click",(function(e){e.target===l&&c()}));var d={};d=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("2Jedz");var u={};u=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("ehEdb");var g={};g=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("1zLvb");var p={};p=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("bk9Lk");var b={};b=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("kMOzt");var m={};m=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("ku5Dq");const f=document.querySelector("#allModal"),h=document.querySelector(".category__books"),k=document.querySelector(".add-storage-button"),y=document.querySelector(".remove-modal-btn"),v=document.querySelector(".storage-description"),E="storage-data";let _=[],S={};function H(){const e=JSON.parse(localStorage.getItem(E)),t=S.id;if(!e||0===e.length)return k.style.display="block",void(y.style.display="none");e.find((e=>e.id===t))?(k.style.display="none",y.style.display="block"):(k.style.display="block",y.style.display="none")}k.addEventListener("click",(function(){const e=JSON.parse(localStorage.getItem(E)),t=S;e&&0!==e.length?(e.push(t),localStorage.setItem(E,JSON.stringify(e))):(_.push(t),localStorage.setItem(E,JSON.stringify(_)));v.textContent="Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.",H()})),y.addEventListener("click",(function(){v.textContent="";const e=S.id,t=JSON.parse(localStorage.getItem(E)),o=t.findIndex((t=>t.id===e));t.splice(o,1),localStorage.setItem(E,JSON.stringify(t)),H()})),h.addEventListener("click",(function(e){const o=e.target.closest("li").id;i.classList.remove("is-hidden"),l.classList.remove("is-hidden"),async function(e){f.innerHTML="";try{const o=await async function(e){try{S={};const t=await fetch(`https://books-backend.p.goit.global/books/${e}`),o=await t.json();return S={book_image:o.book_image,title:o.title,author:o.author,marketAmazon:o.buy_links[0].url,marketAppleBooks:o.buy_links[1].url,marketBookshop:o.buy_links[4].url,list_name:o.list_name,id:o._id},o}catch(e){throw console.error("Error",e),e}}(e);return H(),function(e){const o=e.book_image,n=e.title,r=e.author,a=e.buy_links[0].url,i=e.buy_links[1].url,s=e.buy_links[4].url,l=`  \n  <img src="${o}" alt="Book Image" class="image-about-book-modal">\n  <div class="info-modal">\n  <h2 class="title-about-book-modal">${n}</h2>\n  <p class="author-about-book-modal"> ${r}</p>\n  <p class="text-about-book-modal">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Error, iure nam facere exercitationem quibusdam cum in quasi impedit perferendis porro. Vero quos minima doloribus magni corporis beatae ducimus officiis! Rerum?</p>\n  <ul class="shop-modal-list"> <li class="shop-modal-item"><a href="${a}" target="_blank"\n    > <img\n     width="62"\n    height="19"\n    srcset="\n    ${t(d)} 1x,\n    ${t(u)} 2x\n  "\n   src="${t(d)}"\n    alt="Amazon"\n  /></a></li>\n  <li class="shop-modal-item"><a href="${i}" target="_blank"\n    > <img\n    width="33"\n    height="32"\n    srcset="\n    ${t(g)} 1x,\n    ${t(p)} 2x\n  "\n   src="${t(g)}"\n    alt="AppleBooks"\n  /></a></li>\n  <li class="shop-modal-item"><a href="${s}" target="_blank"\n    > <img\n    width="38"\n    height="36"\n    srcset="\n    ${t(b)} 1x,\n    ${t(m)} 2x\n  "\n   src="${t(b)}"\n    alt="Book-Shop"\n  /></a></li>\n</ul>\n</div>\n  `;f.innerHTML=l}(o),o}catch(e){throw console.error("Error",e),e}}(o)}));var w={};w=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("1UC96");var q={};q=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("1Qsmf");var L={};L=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("eWCYn");const $=document.querySelector(".category__list"),x=document.querySelector(".category__books"),O="https://books-backend.p.goit.global/books/category";$.addEventListener("click",(async function(e){if("BUTTON"!==e.target.nodeName)return;const o=e.target.name;try{const e=await async function(e){try{const t=`${O}?category=${e}`,o=await fetch(t);if(!o.ok)throw new Error(`Server responded with status: ${o.status}`);return await o.json()}catch(e){return console.error(`Failed to fetch category: ${e.message}`),[]}}(o),n=await async function(e,o){if(0===e.length){let e=t(w);return window.innerWidth<768?e=t(L):window.innerWidth<1280&&(e=t(q)),`<li class="book">\n             <img src="${e}" alt="No books found" />\n              <h3>No books found</h3>\n            </li>`}let n=o.split(" ");n[n.length-1]=`<span class='highlight'>${n[n.length-1]}</span>`,o=n.join(" ");document.querySelector(".category-title").innerHTML=`<h2 class="category-title">${o}</h2>`;let r="";return r+=e.map((({title:e,author:t,book_image:o,_id:n})=>`<li id="${n}" class="books">\n        <img src="${o}" alt="${e}" />\n        <h3>${e}</h3>\n        <p>${t}</p>\n         <div class="book-popup"> quick view </div>\n      </li>`)).join(""),r}(e,o);x.innerHTML=n}catch(e){console.error(e.message)}})),a("gEuW4")}();
//# sourceMappingURL=index.cda9b46b.js.map
