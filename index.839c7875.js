!function(){const e=document.querySelector(".modal"),t=document.querySelector("#openModalBtn"),o=document.querySelector(".storage-button"),n=document.querySelector(".storage-delete-button"),i=document.querySelector(".storage-description"),r="storage-data",s=[];let a={};n.addEventListener("click",(function(){const e=a.id,t=JSON.parse(localStorage.getItem(r));i.textContent="";const o=t.findIndex((t=>t.id===e)),n=t.splice(o+1,1);localStorage.setItem(r,JSON.stringify(n))})),o.addEventListener("click",(function(e){const t=a;s.push(t),i.textContent="Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.",e.target.textContent="Remove from the shopping list",localStorage.setItem(r,JSON.stringify(s))})),t.addEventListener("click",(function(){!async function(t){a={};try{const o=await async function(e){try{a={};const t=await fetch(`https://books-backend.p.goit.global/books/${e}`),o=await t.json();return a={book_image:o.book_image,title:o.title,author:o.author,marketAmazon:o.buy_links[0].url,marketAppleBooks:o.buy_links[1].url,marketBookshop:o.buy_links[4].url,list_name:o.list_name,id:o._id},console.log(a),o}catch(e){throw console.error("Error",e),e}}(t);return function(t){const o=t.book_image,n=t.title,i=t.author,r=t.buy_links[0].url,s=t.buy_links[1].url,a=t.buy_links[4].url,c=`\n  <img src="${o}" alt="Book Image" class="image__about-book-modal">\n  <h2>${n}</h2>\n  <p> ${i}</p>\n  <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Error, iure nam facere exercitationem quibusdam cum in quasi impedit perferendis porro. Vero quos minima doloribus magni corporis beatae ducimus officiis! Rerum?</p>\n  <ul> <li><a href="${r}" target="_blank"\n    > <img\n    width="28"\n    height="28"\n    src="src/images/png-icons/shops/amazon-icon.png"\n    alt="close-icon"\n  /></a></li>\n  <li><a href="${s}" target="_blank"\n    > <img\n    width="28"\n    height="28"\n    src="src/images/png-icons/shops/first-book-shop-icon.png"\n    alt="close-icon"\n  /></a></li>\n  <li><a href="${a}" target="_blank"\n    > <img\n    width="28"\n    height="28"\n    src="src/images/png-icons/shops/second-book-shop-icon.png"\n    alt="close-icon"\n  /></a></li>\n</ul>\n  `;e.insertAdjacentHTML("afterbegin",c)}(o),o}catch(e){throw console.error("Error",e),e}}("643282b2e85766588626a0fc")}));const c=document.getElementById("openModalBtn"),l=document.querySelector(".modal"),u=l.querySelector(".close-modal-btn"),d=document.querySelector(".js-backdrop-modal");function g(){l.classList.add("is-hidden")}c.addEventListener("click",(function(){l.classList.remove("is-hidden")})),u.addEventListener("click",g),document.addEventListener("keydown",(function(e){"Escape"===e.key&&g()})),d.addEventListener("click",(function(e){e.target===d&&g()}));const m=document.querySelector(".category__list"),h=document.querySelector(".category__books"),p="https://books-backend.p.goit.global/books/category";m.addEventListener("click",(async function(e){if("BUTTON"!==e.target.nodeName)return;const t=e.target.name;try{const e=await async function(e){try{const t=`${p}?category=${e}`,o=await fetch(t);if(!o.ok)throw new Error(`Server responded with status: ${o.status}`);return await o.json()}catch(e){return console.error(`Failed to fetch category: ${e.message}`),[]}}(t),o=await async function(e,t){if(0===e.length)return'<li class="book">\n             <img src=\'.images/placeholders/big-placeholder\' alt="No books found" />\n              <h3>No books found</h3>\n            </li>';let o=t.split(" ");o[o.length-1]=`<span class='highlight'>${o[o.length-1]}</span>`,t=o.join(" ");document.querySelector(".category-title").innerHTML=`<h2 class="category-title">${t}</h2>`;let n="";return n+=e.map((({title:e,author:t,book_image:o})=>`<li class="book">\n          <img src="${o}" alt="${e}" />\n          <h3>${e}</h3>\n          <p>${t}</p>\n        </li>`)).join(""),n}(e,t);h.innerHTML=o}catch(e){console.error(e.message)}}))}();
//# sourceMappingURL=index.839c7875.js.map
