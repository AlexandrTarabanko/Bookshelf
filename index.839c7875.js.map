{"mappings":"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","sources":["src/js/about-book-modal.js","src/js/modals.js","src/js/category.js"],"sourcesContent":["const bookModalContainer = document.querySelector('.modal');\nconst openModalBtn = document.querySelector('#openModalBtn');\nconst storageButton = document.querySelector('.storage-button');\nconst deleteStorageBtn = document.querySelector('.storage-delete-button');\nconst storageDescription = document.querySelector('.storage-description');\nconst bookId = '643282b2e85766588626a0fc';\nconst secondBookId = '643282b1e85766588626a080';\nconst STORAGE_KEY = 'storage-data';\nconst storageArr = [];\nlet storageObj = {};\n\ndeleteStorageBtn.addEventListener('click', onStorageDelete);\nstorageButton.addEventListener('click', onStorageAdd);\nopenModalBtn.addEventListener('click', onModalOpen);\n\nfunction onModalOpen() {\n  createModal(bookId);\n}\n\nasync function fetchBookById(bookId) {\n  try {\n    storageObj = {};\n    const response = await fetch(\n      `https://books-backend.p.goit.global/books/${bookId}`\n    );\n    const data = await response.json();\n    storageObj = {\n      book_image: data.book_image,\n      title: data.title,\n      author: data.author,\n      marketAmazon: data.buy_links[0].url,\n      marketAppleBooks: data.buy_links[1].url,\n      marketBookshop: data.buy_links[4].url,\n      list_name: data.list_name,\n      id: data._id,\n    };\n    console.log(storageObj);\n    return data;\n  } catch (error) {\n    console.error('Error', error);\n    throw error;\n  }\n}\n\nfunction createMarkup(data) {\n  const bookModalImage = data.book_image;\n  const bookTitle = data.title;\n  const bookAuthor = data.author;\n  const marketAmazon = data.buy_links[0].url;\n  const marketAppleBooks = data.buy_links[1].url;\n  const marketBookshop = data.buy_links[4].url;\n\n  const html = `\n  <img src=\"${bookModalImage}\" alt=\"Book Image\" class=\"image__about-book-modal\">\n  <h2>${bookTitle}</h2>\n  <p> ${bookAuthor}</p>\n  <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Error, iure nam facere exercitationem quibusdam cum in quasi impedit perferendis porro. Vero quos minima doloribus magni corporis beatae ducimus officiis! Rerum?</p>\n  <ul> <li><a href=\"${marketAmazon}\" target=\"_blank\"\n    > <img\n    width=\"28\"\n    height=\"28\"\n    src=\"src/images/png-icons/shops/amazon-icon.png\"\n    alt=\"close-icon\"\n  /></a></li>\n  <li><a href=\"${marketAppleBooks}\" target=\"_blank\"\n    > <img\n    width=\"28\"\n    height=\"28\"\n    src=\"src/images/png-icons/shops/first-book-shop-icon.png\"\n    alt=\"close-icon\"\n  /></a></li>\n  <li><a href=\"${marketBookshop}\" target=\"_blank\"\n    > <img\n    width=\"28\"\n    height=\"28\"\n    src=\"src/images/png-icons/shops/second-book-shop-icon.png\"\n    alt=\"close-icon\"\n  /></a></li>\n</ul>\n  `;\n\n  bookModalContainer.insertAdjacentHTML('afterbegin', html);\n}\n\nasync function createModal(bookId) {\n  storageObj = {}; // ????????????????????????????????????\n  try {\n    const data = await fetchBookById(bookId);\n    createMarkup(data);\n    return data;\n  } catch (error) {\n    console.error('Error', error);\n    throw error;\n  }\n}\n\nfunction onStorageAdd(e) {\n  const dataToSave = storageObj;\n  storageArr.push(dataToSave);\n  storageDescription.textContent =\n    'Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.';\n  e.target.textContent = 'Remove from the shopping list';\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(storageArr));\n}\n\nfunction onStorageDelete() {\n  const idToDelete = storageObj.id;\n  const storageArr = JSON.parse(localStorage.getItem(STORAGE_KEY));\n  storageDescription.textContent = '';\n\n  const indexToDelete = storageArr.findIndex(obj => obj.id === idToDelete);\n  const newStorageArr = storageArr.splice(indexToDelete + 1, 1);\n\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(newStorageArr));\n}\n","// Змінити на клік по зображенням\n\nconst openModalBtn = document.getElementById('openModalBtn');\n\nconst modal = document.querySelector('.modal');\nconst closeModalBtn = modal.querySelector('.close-modal-btn');\nconst jsBackdropModal = document.querySelector('.js-backdrop-modal');\n\nfunction openModal() {\n  modal.classList.remove('is-hidden');\n}\n\nfunction closeModal() {\n  modal.classList.add('is-hidden');\n}\n\n// Змінити на клік по зображенням\nopenModalBtn.addEventListener('click', openModal);\n\ncloseModalBtn.addEventListener('click', closeModal);\n\ndocument.addEventListener('keydown', function (event) {\n  if (event.key === 'Escape') {\n    closeModal();\n  }\n});\n\njsBackdropModal.addEventListener('click', function (event) {\n  if (event.target === jsBackdropModal) {\n    closeModal();\n  }\n});\n\nexport { openModal, closeModal };\n","const listRef = document.querySelector('.category__list');\nconst bookListRef = document.querySelector('.category__books');\nconst ENDPOINT = 'https://books-backend.p.goit.global/books/category';\n\nlistRef.addEventListener('click', onCategoryCatch);\n\nasync function onCategoryCatch(e) {\n  if (e.target.nodeName !== 'BUTTON') return;\n  const categoryName = e.target.name;\n  try {\n    const caughtCategory = await fetchByCategory(categoryName);\n    const paintedList = await paintMarkup(caughtCategory, categoryName);\n    bookListRef.innerHTML = paintedList;\n  } catch (error) {\n    console.error(error.message);\n  }\n}\n\nasync function fetchByCategory(categoryName) {\n  try {\n    const url = `${ENDPOINT}?category=${categoryName}`;\n    const query = await fetch(url);\n    if (!query.ok) {\n      throw new Error(`Server responded with status: ${query.status}`);\n    }\n    const jsonQuery = await query.json();\n    return jsonQuery;\n  } catch (error) {\n    console.error(`Failed to fetch category: ${error.message}`);\n    return [];\n  }\n}\n\nasync function paintMarkup(arr, categoryName) {\n  if (arr.length === 0) {\n    return `<li class=\"book\">\n             <img src='.images/placeholders/big-placeholder' alt=\"No books found\" />\n              <h3>No books found</h3>\n            </li>`;\n  }\n\n  let words = categoryName.split(' ');\n  words[words.length - 1] = `<span class='highlight'>${\n    words[words.length - 1]\n  }</span>`;\n  categoryName = words.join(' ');\n\n  const categoryTitleRef = document.querySelector('.category-title');\n  categoryTitleRef.innerHTML = `<h2 class=\"category-title\">${categoryName}</h2>`;\n\n  let markup = '';\n  markup += arr\n    .map(\n      ({ title, author, book_image }) =>\n        `<li class=\"book\">\n          <img src=\"${book_image}\" alt=\"${title}\" />\n          <h3>${title}</h3>\n          <p>${author}</p>\n        </li>`\n    )\n    .join('');\n\n  return markup;\n}\n"],"names":["$3d5962d11ded151f$var$bookModalContainer","document","querySelector","$3d5962d11ded151f$var$openModalBtn","$3d5962d11ded151f$var$storageButton","$3d5962d11ded151f$var$deleteStorageBtn","$3d5962d11ded151f$var$storageDescription","$3d5962d11ded151f$var$STORAGE_KEY","$3d5962d11ded151f$var$storageArr","$3d5962d11ded151f$var$storageObj","addEventListener","idToDelete","id","storageArr","JSON","parse","localStorage","getItem","textContent","indexToDelete","findIndex","obj","newStorageArr","splice","setItem","stringify","e","dataToSave","push","target","async","bookId","data","response","fetch","json","book_image","title","author","marketAmazon","buy_links","url","marketAppleBooks","marketBookshop","list_name","_id","console","log","error","$3d5962d11ded151f$var$fetchBookById","bookModalImage","bookTitle","bookAuthor","html","insertAdjacentHTML","$3d5962d11ded151f$var$createMarkup","$3d5962d11ded151f$var$createModal","$df97da459fafe592$var$openModalBtn","getElementById","$df97da459fafe592$var$modal","$df97da459fafe592$var$closeModalBtn","$df97da459fafe592$var$jsBackdropModal","$df97da459fafe592$export$3f6fecd573f3fa48","classList","add","remove","event","key","$1b5243cbc9dc9139$var$listRef","$1b5243cbc9dc9139$var$bookListRef","$1b5243cbc9dc9139$var$ENDPOINT","nodeName","categoryName","name","caughtCategory","query","ok","Error","status","message","$1b5243cbc9dc9139$var$fetchByCategory","paintedList","arr","length","words","split","join","innerHTML","markup","map","$1b5243cbc9dc9139$var$paintMarkup"],"version":3,"file":"index.839c7875.js.map"}